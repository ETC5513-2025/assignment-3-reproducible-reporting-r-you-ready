---
title: "From Deprivation to Degree: Exploring the Impact of Local Income Levels on Youth Education in England"
author: Group R you OK? 


format: 
  html:
    fontsize: 13pt 
    toc: true
    toc-title: Contents
    theme: cosmo
    citation-hover: true
    crossrefs-hover: true
    code-overflow: wrap
    anchor-sections: true
    df-print: kable
  pdf:
    toc: true
    pdf-engine: xelatex
    toc-title: Contents
    papersize: a4
    linestretch: 1.25
    geometry: 
      - top=20mm
      - bottom=20mm
      - left=20mm
      - right=20mm
    fontsize: 11pt
    df-print: kable
  
knitr:
  opts_chunk:
    out.width: "70%"
    fig.align: "center"
execute: 
  code-overlay:
    margin: "auto"

crossref: 
  fig-title: Figure
  tbl-title: Table
  fig-prefix: Figure
  tbl-prefix: :Table
  labels: arabic

embed-resources: true
fig-cap-location: bottom
number-sections: true
editor: visual
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  warning = FALSE,
  results = TRUE,
  message = FALSE
  )
```

```{r package loading, include=FALSE}
library(dplyr)
library(ggplot2)
library(readr)
library(dplyr)
library(tidyr)
```

# Executive summary

This report explores the relationship between local income deprivation and educational attainment among young people aged 18 to 22 in England. Using national town-level data, we examine qualification rates at three key life stages: age 18 (Level 3), 19 (university entry), and 22 (Level 6+). The results show a clear trend: educational outcomes improve as deprivation decreases, with the most pronounced differences observed by age 22. These findings highlight the long-term impact of regional inequality on youth development and underscore the need for targeted educational support in deprived areas.

# Introduction

Understanding how local income levels influence educational outcomes is critical for addressing regional inequality in England. This report explores whether town-level income deprivation affects academic achievement among young people.

We focus on three key outcome variables: Level 3 qualification at age 18, full-time university participation at age 19, and Level 6 or above qualification by age 22. These milestones are selected under the assumption that they represent a logical progression from secondary to higher education, aligning with national benchmarks for long-term attainment.

To maintain analytical consistency, cities are excluded from the dataset. Cities differ markedly from towns in terms of population density, education infrastructure, and socio-economic complexity, which could introduce confounding effects.

By analyzing average attainment across these groups, we aim to assess whether structural income disparities limit academic progression. This study contributes to the understanding of regional educational inequality and may inform targeted policy interventions.

# Research Question

Does the income level of a town affect the educational outcomes of young people?

# Data Loading

In this study, our group chose to download the dataset locally rather than relying on an online dataset. This approach improves the reproducibility of the analysis because local data ensures continuous access to a stable version of the data and avoids remote sources updating or deleting the data resulting in different analysis results. Also, local datasets are more stable as they do not rely on a network connection, which avoids interruptions due to application program interface limitations or network problems. It also improves processing speed and supports offline analysis, which is essential for a reliable and efficient research workflow.

```{r data loading}
edu_df <- read.csv("data/english_education.csv")
```

# Dataset introduction

We use the english_education.csv dataset from the [TidyTuesday](https://github.com/rfordatascience/tidytuesday/blob/main/data/2024/2024-01-23/english_education.csv), which contains education and deprivation data for over 1,000 English towns. It includes over 1,000 observations at the town level and features variables such as income_flag, level_3_at_age_18 variables and so on, see @tbl-tables. The dataset is suitable for examining how structural income deprivation may affect academic progression among young people. The original data has been archived in the project repository and here is [the location of the data.](data/english_education.csv)

```{r}
#| warning: false
#| mmessage: false
#| echo: true
#| label: tbl-tables
#| tbl-cap: 
#| - "This table contains the key variables used in the analysis along with their descriptions"


edu_variable_desc <- data.frame(
  Variable = c(
    "income_flag",
    "level_3_at_age_18",
    "activity_at_age_19_full_time_higher_education",
    "highest_level_qualification_achieved_by_age_22_level_6_or_above",
    "size_flag",
    "coastal",
    "job_density_flag"
  ),
  Description = c(
    "Categorical income deprivation classification of the town (lower/mid/higher). Used as the independent grouping variable.",
    "Proportion of young people in the 2012/13 cohort who achieved Level 3 qualifications at age 18.",
    "Proportion of the cohort who entered full-time higher education by age 19.",
    "Proportion of the cohort who attained Level 6 or above qualifications (e.g., Bachelor's degree) by age 22.",
    "Town/city size classification based on 2011 census data (used to identify and exclude cities).",
    "Indicator whether a town is coastal, used to flag unique geographic features.",
    "Describes whether a town is primarily residential, working, or mixed in function."
  )
)

knitr::kable(
  edu_variable_desc,
  col.names = c("Variable Names", "Variable Description"),
  align = c("l", "r"),
  booktabs = TRUE
)
```

## Dataset Description

The dataset contains a total of `r nrow(edu_df)` observations and `r ncol(edu_df)`variables.

![Inline R code](images/inline_code.png){#fig-inlinecode}

See @fig-inlinecode for the detail of the *Inline R code* used.

```{r}
#| warning: false
#| message: false
#| label: tbl-tableone
#| tbl-cap: "First 2 rows of the data"
#| include: true
#| df-print: kable

head(edu_df, 2)
```

See @tbl-tableone for the detail of the first 2 rows of the data and the types of variables in the dataset.

# Result

```{r}
#| echo: true
#| layout-ncol: 1
#| label: fig-income-education
#| fig-cap: "Educational Attainment by Income Deprivation Level (Cities Excluded)"
#| fig-subcap:
#| - "Comparison of educational outcomes across income deprivation levels"

edu_df_clean <- edu_df %>%
  filter(income_flag != "Cities") %>%
  drop_na(level_3_at_age_18,
          activity_at_age_19_full_time_higher_education,
          highest_level_qualification_achieved_by_age_22_level_6_or_above) %>%
  mutate(income_flag = factor(income_flag,
                              levels = c("Higher deprivation towns",
                                         "Mid deprivation towns",
                                         "Lower deprivation towns")))

summary_df <- edu_df_clean %>%
  group_by(income_flag) %>%
  summarise(
    level3 = mean(level_3_at_age_18, na.rm = TRUE),
    uni19 = mean(activity_at_age_19_full_time_higher_education, na.rm = TRUE),
    level6 = mean(highest_level_qualification_achieved_by_age_22_level_6_or_above, na.rm = TRUE)
  ) %>%
  pivot_longer(
    cols = c(level3, uni19, level6),
    names_to = "education_stage",
    values_to = "mean_value"
  )

ggplot(summary_df, aes(x = income_flag, y = mean_value, fill = education_stage)) +
  geom_col(position = "dodge", width = 0.7) +
  scale_fill_manual(
    values = c("level3" = "#4C72B0",
               "uni19" = "#55A868",
               "level6" = "#C44E52"),
    labels = c("Level 3 at Age 18", "University at 19", "Level 6+ by Age 22")
  ) +
  labs(
    x = "Income Deprivation Group",
    y = "Average Proportion",
    fill = "Education Stage"
  ) +
  theme_minimal()

```

-   *As shown in @fig-income-education, educational attainment increases consistently as income deprivation decreases. Towns with lower deprivation have the highest average proportions of students who achieved Level 3 qualifications at age 18, entered university at age 19, and obtained Level 6 or higher qualifications by age 22. In contrast, higher deprivation towns show substantially lower attainment at each stage. The difference is most pronounced at the higher education level, where the gap between high and low deprivation towns exceeds 10 percentage points. This indicates a strong association between local income levels and long-term educational outcomes among young people.*

# Discussion

Our findings show a clear trend: towns with lower income deprivation consistently achieve higher educational outcomes at ages 18, 19, and 22. This pattern is supported by recent ONS research, which found that students in less deprived and smaller towns tend to perform better academically. The contrast is especially strong by age 22, where the attainment gap is most pronounced.

# Conclusion

There is a strong association between local income deprivation and long-term educational attainment. Structural disadvantages appear to accumulate over time, underscoring the need to address educational inequality at the regional level.

# Recommendations

Increase educational support in high-deprivation areas.

Expand access programs to encourage university progression.

Incorporate income deprivation metrics into education policy and resource allocation.

# Citation

Wickham H, François R, Henry L, Müller K, Vaughan D (2023). *dplyr: A Grammar of Data Manipulation*. R package version 1.1.4, <https://CRAN.R-project.org/package=dplyr>.

H. Wickham. ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag New York, 2016.

Wickham H, Hester J, Bryan J (2024). *readr: Read Rectangular Text Data*. R package version 2.1.5, <https://CRAN.R-project.org/package=readr>.

Wickham H, François R, Henry L, Müller K, Vaughan D (2023). *dplyr: A Grammar of Data Manipulation*. R package version 1.1.4, <https://CRAN.R-project.org/package=dplyr>.

Wickham H, Vaughan D, Girlich M (2024). *tidyr: Tidy Messy Data*. R package version 1.3.1, <https://CRAN.R-project.org/package=tidyr>.
